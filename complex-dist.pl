#!/usr/bin/perl

require "./stats/tag2date.pm";

sub num {
    my ($t)=@_;
    if($t =~ /^curl-(\d)_(\d+)_(\d+)/) {
        return 10000*$1 + 100*$2 + $3;
    }
    elsif($t =~ /^curl-(\d)_(\d+)/) {
        return 10000*$1 + 100*$2;
    }
}

sub sortthem {
    return num($a) <=> num($b);
}

@alltags= `git tag -l`;

foreach my $t (@alltags) {
    chomp $t;
    if($t =~ /^curl-([0-9_]*[0-9])\z/) {
        push @releases, $t;
    }
}

sub complexity {
    my ($tag, $path) = @_;

    # Get source files to count
    my @files;
    open(G, "git ls-tree -r --name-only $tag -- $path 2>/dev/null|");
    while(<G>) {
        chomp;
        if($_ =~ /[ch]\z/) {
            push @files, $_;
        }
    }
    close(G);

    my $cmd;
    for(@files) {
        $cmd .= "$tag:$_ ";
    }

    #  Modified McCabe Cyclomatic Complexity
    #  |   Traditional McCabe Cyclomatic Complexity
    #  |       |    # Statements in function
    #  |       |        |   First line of function
    #  |       |        |       |   # lines in function
    #  |       |        |       |       |

    my @score;
    my $funcs;
    my $totlines;

    open(G, "git show $cmd 2>/dev/null| pmccabe 2>/dev/null|");
    while(<G>) {
        if($_ =~ /^(\d+)\t(\d+)\t(\d+)\t(\d+)\t(\d+)/) {
            my ($modmccabe, $mccabe, $statements, $first, $lines)=($1, $2, $3, $4, $5);
            if($modmccabe > 1000) {
                # something is wrong
                #print STDERR $_;
                return 0;
            }

            my $step;
            if($modmccabe <= 10) {
                $step = 0;
            }
            elsif($modmccabe <= 30) {
                $step = 1;
            }
            elsif($modmccabe <= 50) {
                $step = 2;
            }
            elsif($modmccabe <= 60) {
                $step = 3;
            }
            elsif($modmccabe <= 70) {
                $step = 4;
            }
            elsif($modmccabe <= 80) {
                $step = 5;
            }
            elsif($modmccabe <= 90) {
                $step = 6;
            }
            elsif($modmccabe <= 100) {
                $step = 7;
            }
            elsif($modmccabe <= 150) {
                $step = 8;
            }
            elsif($modmccabe <= 200) {
                $step = 9;
            }
            else {
                $step = 10;
            }
            $score[$step] += $lines;
            $totlines += $lines;
        }
    }
    close(G);
    my @share;
    my $acc;
    for my $s (0 .. 10) {
        $share[$s] = ($score[$s]*100 / $totlines) + $acc;
        $acc += ($score[$s]*100 / $totlines);
    }
    return @share;
}

print <<CACHE
2000-03-14;37.864;56.912;63.828;68.488;76.634;79.769;83.440;87.980;100.000;100.000;100.000
2000-03-21;37.880;56.930;63.838;68.492;76.563;79.777;83.443;87.986;100.000;100.000;100.000
2000-03-21;38.250;57.187;64.054;68.680;76.703;79.897;83.541;88.058;100.000;100.000;100.000
2000-08-21;40.195;60.724;66.779;68.699;75.927;78.241;85.059;93.945;100.000;100.000;100.000
2000-08-30;40.347;60.753;66.911;68.817;75.994;78.340;85.142;93.964;100.000;100.000;100.000
2000-09-28;42.119;62.155;64.195;69.676;76.282;78.464;84.763;88.370;100.000;100.000;100.000
2000-10-16;42.780;62.716;64.703;70.067;76.505;78.742;84.990;88.585;100.000;100.000;100.000
2000-12-04;41.552;61.850;65.045;70.430;76.714;78.946;85.051;88.474;100.000;100.000;100.000
2001-01-05;42.417;62.388;65.530;70.826;77.006;79.202;85.234;88.601;100.000;100.000;100.000
2001-01-27;34.057;56.419;59.905;61.765;68.620;73.094;79.069;86.632;100.000;100.000;100.000
2001-02-13;33.413;53.609;58.708;60.503;67.120;71.438;74.420;84.754;100.000;100.000;100.000
2001-03-22;33.191;55.135;61.747;63.393;69.461;73.504;76.238;82.485;92.610;100.000;100.000
2001-04-04;32.989;55.175;61.751;63.388;69.423;73.443;76.163;82.376;92.650;100.000;100.000
2001-04-23;32.955;55.281;61.846;63.470;69.458;73.447;76.145;82.371;92.667;100.000;100.000
2001-05-07;32.812;55.350;61.884;63.501;69.460;73.431;76.116;82.312;92.695;100.000;100.000
2001-06-07;32.316;54.933;61.477;63.236;69.174;73.130;75.805;81.972;92.607;100.000;100.000
2001-08-20;32.509;55.233;61.677;63.397;69.178;73.207;75.812;78.726;100.000;100.000;100.000
2001-09-25;33.546;56.505;63.871;63.871;71.022;74.830;77.261;77.261;100.000;100.000;100.000
2001-11-04;33.245;57.236;66.743;68.340;75.267;81.646;83.984;83.984;100.000;100.000;100.000
2001-12-05;32.687;57.939;67.279;68.819;75.505;81.780;84.037;84.037;100.000;100.000;100.000
2002-01-23;35.154;59.759;68.855;70.398;76.740;80.328;84.988;84.988;100.000;100.000;100.000
2002-02-05;35.125;59.731;68.849;70.382;76.715;80.283;84.933;84.933;100.000;100.000;100.000
2002-03-07;35.032;59.734;68.798;70.318;74.971;80.326;84.990;84.990;100.000;100.000;100.000
2002-04-15;35.342;60.857;69.043;69.043;75.161;78.760;85.201;85.201;100.000;100.000;100.000
2002-05-13;35.592;59.886;69.384;69.384;75.375;78.969;85.261;85.261;100.000;100.000;100.000
2002-06-13;34.519;59.412;68.842;68.842;73.266;78.688;84.897;84.897;100.000;100.000;100.000
2002-10-01;33.928;60.614;69.966;69.966;76.031;81.364;84.952;84.952;90.634;100.000;100.000
2002-10-11;33.802;62.116;70.100;70.100;76.140;81.451;85.024;85.024;90.683;100.000;100.000
2002-11-18;33.486;60.796;69.817;69.817;75.809;81.078;84.623;84.623;90.388;100.000;100.000
2003-01-14;33.684;61.007;69.950;69.950;75.850;81.062;84.552;84.552;90.429;100.000;100.000
2003-04-02;35.063;63.378;68.335;72.360;74.283;79.779;83.420;83.420;89.634;100.000;100.000
2003-05-19;34.080;62.720;68.354;72.335;74.209;79.582;81.457;83.460;89.779;100.000;100.000
2003-07-28;35.333;63.683;69.140;72.962;74.720;76.303;81.708;83.558;89.676;95.098;100.000
2003-08-15;35.893;64.353;69.745;69.745;75.353;76.886;82.155;84.047;87.395;95.192;100.000
2003-11-01;35.133;64.363;70.893;70.893;76.354;77.838;79.461;84.983;92.219;100.000;100.000
2004-01-22;35.585;60.602;71.101;71.101;74.959;78.131;79.719;81.512;92.336;100.000;100.000
2004-03-18;37.141;65.288;75.203;75.203;79.585;83.139;84.934;86.942;89.863;100.000;100.000
2004-04-26;36.926;63.517;72.400;72.400;76.064;79.012;80.500;82.165;88.214;100.000;100.000
2004-06-02;36.161;63.502;73.323;73.323;76.777;78.298;81.087;81.087;86.121;100.000;100.000
2004-08-10;36.484;62.643;73.260;73.260;76.903;78.409;81.172;81.172;86.143;100.000;100.000
2004-10-18;36.837;61.811;73.606;73.606;77.205;78.676;81.378;81.378;86.237;96.099;100.000
2004-12-20;37.815;62.626;74.011;74.011;77.411;78.824;81.417;81.417;86.138;96.261;100.000
2005-02-01;38.156;62.893;71.840;74.165;77.497;78.895;81.461;81.461;86.256;96.316;100.000
2005-03-04;40.203;65.781;75.142;76.419;79.625;79.625;82.095;82.095;86.709;96.433;100.000
2005-04-05;39.809;65.277;75.248;76.517;79.702;79.702;82.155;82.155;86.766;96.457;100.000
2005-05-16;39.737;64.492;75.790;77.040;80.148;80.148;82.543;82.543;87.073;93.292;100.000
2005-09-01;39.565;64.513;74.999;77.030;80.223;80.223;82.585;82.585;87.112;93.329;100.000
2005-10-13;40.705;64.957;75.273;77.269;80.430;80.430;82.750;82.750;87.209;93.434;100.000
2005-12-06;40.631;65.974;75.340;77.319;80.470;80.470;82.770;82.770;87.295;93.484;100.000
2006-02-27;40.201;65.590;75.511;77.467;77.467;80.650;82.924;82.924;87.477;93.531;100.000
2006-03-20;40.001;65.601;75.523;77.478;77.478;80.660;82.932;82.932;87.483;93.534;100.000
2006-06-12;40.361;67.546;77.802;78.530;78.530;81.597;83.750;83.750;88.073;93.813;100.000
2006-08-07;40.392;67.554;76.780;78.566;78.566;81.674;83.813;83.813;88.137;93.806;100.000
2006-10-29;40.366;67.023;80.289;80.989;80.989;82.414;84.499;84.499;88.668;93.880;100.000
2007-01-29;39.600;65.934;80.707;81.424;81.424;82.790;84.802;84.802;88.837;93.935;100.000
2007-04-11;39.177;65.768;80.621;81.020;81.845;83.286;85.217;85.217;89.153;94.104;100.000
2007-06-25;39.719;65.870;80.577;80.577;82.343;83.790;85.668;85.668;89.529;94.244;100.000
2007-07-10;39.770;65.442;80.775;80.775;82.515;83.947;85.806;85.806;89.629;94.295;100.000
2007-09-13;40.243;66.153;79.750;79.750;80.542;81.950;83.780;83.780;89.318;94.329;100.000
2007-10-29;40.400;65.898;76.861;79.753;80.699;82.083;83.880;83.880;89.363;94.403;100.000
2008-01-28;39.810;65.976;76.190;79.818;79.818;82.112;83.882;83.882;86.677;94.461;100.000
2008-03-30;40.169;64.793;76.797;79.682;80.920;81.864;83.627;85.322;86.416;94.467;100.000
2008-06-04;40.686;64.812;76.795;79.668;79.668;81.887;83.679;85.362;86.447;94.502;100.000
2008-09-01;40.254;66.519;78.421;81.940;82.631;84.876;86.644;86.644;89.251;97.471;100.000
2008-11-05;40.548;66.928;78.586;82.145;82.835;85.061;85.899;86.799;89.347;94.118;100.000
2008-11-13;40.512;67.251;78.554;82.114;82.805;85.035;85.875;86.776;89.329;94.108;100.000
2009-01-19;40.228;67.201;78.459;81.434;82.780;85.000;85.837;86.736;89.278;94.027;100.000
2009-03-02;39.408;66.056;76.348;82.035;83.337;85.477;86.284;87.150;89.604;94.229;100.000
2009-05-18;39.328;65.444;76.388;82.038;83.362;85.522;86.324;87.185;89.627;94.237;100.000
2009-08-12;38.847;64.912;75.360;81.749;83.073;85.214;86.010;86.865;89.292;93.924;100.000
2009-11-04;39.023;64.536;74.533;81.714;83.014;83.917;84.707;86.916;89.278;92.057;100.000
2010-02-09;41.940;65.515;74.862;82.086;82.086;84.251;85.739;87.764;90.000;92.647;100.000
2010-04-14;41.822;65.635;75.148;82.300;82.300;84.456;85.929;87.933;90.144;92.764;100.000
2010-06-16;41.395;65.950;75.322;82.126;82.126;84.162;85.543;86.276;90.672;93.165;100.000
2010-08-11;41.534;66.128;75.439;82.197;82.745;84.144;85.515;86.243;90.677;93.152;100.000
2010-10-12;41.639;66.299;75.220;82.250;82.793;84.182;84.854;86.272;90.719;93.177;100.000
2010-12-15;41.927;66.488;74.874;82.285;82.827;84.210;84.878;86.290;90.724;93.198;100.000
2011-02-17;41.808;66.343;75.322;80.293;83.085;84.443;85.750;86.457;90.819;93.294;100.000
2011-04-17;41.711;66.501;75.459;80.436;83.194;84.538;85.863;86.561;90.881;93.333;100.000
2011-04-22;41.840;66.384;75.318;80.288;83.049;84.388;85.710;86.411;90.800;93.257;100.000
2013-04-12;42.439;67.726;76.758;80.989;81.573;82.508;84.342;84.995;90.458;91.539;100.000
2013-06-22;42.252;67.647;77.104;80.657;81.860;82.782;84.591;85.235;90.603;91.670;100.000
2013-08-11;42.409;68.908;77.726;81.171;82.337;83.233;84.987;85.614;90.845;91.880;100.000
2013-10-13;43.063;68.572;77.749;80.555;82.373;83.243;84.989;85.612;90.823;91.850;100.000
2013-12-16;43.447;68.175;77.887;80.643;82.445;83.308;85.050;85.667;90.850;91.881;100.000
2014-01-29;43.742;67.886;77.950;80.692;82.485;83.343;85.076;85.690;90.895;91.919;100.000
2014-03-26;44.142;68.425;78.138;81.193;82.952;83.798;85.498;86.100;91.224;92.253;100.000
2014-05-20;43.970;68.000;78.604;80.256;82.993;83.834;85.524;86.123;91.248;92.271;100.000
2014-07-16;43.962;68.038;78.035;80.366;83.085;83.921;85.600;86.195;91.291;92.309;100.000
2014-09-10;44.189;68.355;78.376;80.662;83.353;84.147;85.818;86.401;91.449;92.457;100.000
2014-11-05;43.415;68.210;78.096;80.533;83.230;84.029;85.717;86.307;91.394;92.413;100.000
2015-01-07;43.177;68.425;78.666;81.034;83.658;84.437;86.073;86.646;91.595;92.605;100.000
2015-02-25;42.084;68.244;78.240;80.672;83.343;84.136;85.801;86.384;91.436;92.464;100.000
2015-04-22;42.250;68.131;77.644;80.729;83.390;84.179;85.833;86.414;91.431;92.456;100.000
2015-04-28;42.248;68.120;77.633;80.717;83.378;84.174;85.827;86.408;91.425;92.450;100.000
2015-06-17;42.203;68.107;77.262;80.211;83.901;83.901;85.937;86.513;91.482;92.511;100.000
2015-08-11;42.198;68.245;77.356;80.308;83.980;83.980;86.009;86.582;91.530;92.540;100.000
2015-10-07;42.415;68.154;77.312;80.269;83.506;83.965;85.993;86.565;91.513;92.535;100.000
2015-12-01;42.191;68.400;77.479;80.425;83.627;84.081;86.087;86.660;91.607;92.617;100.000
2016-01-27;42.054;68.114;77.476;80.408;82.957;84.060;85.156;86.694;91.617;92.623;100.000
2016-02-08;41.969;67.755;77.551;80.478;83.021;84.121;85.215;86.749;91.661;92.664;100.000
2016-03-23;42.118;67.771;77.602;80.513;83.047;84.143;85.226;86.758;91.677;92.675;100.000
2016-05-17;41.578;68.131;77.304;80.543;83.038;83.481;84.772;86.337;91.666;92.649;100.000
2016-05-30;41.618;68.151;77.318;80.554;83.047;83.489;84.780;86.343;91.669;92.651;100.000
2016-07-21;41.495;67.953;77.397;80.596;83.083;83.524;84.811;86.370;91.680;92.666;100.000
2016-08-03;41.493;67.958;77.400;80.598;83.084;83.525;84.813;86.372;91.682;92.667;100.000
2016-09-07;41.688;67.994;77.421;80.596;83.095;83.534;84.825;86.387;91.689;92.687;100.000
2016-09-14;41.692;67.994;77.418;80.593;83.091;83.530;84.820;86.391;91.691;92.688;100.000
2016-11-02;41.712;67.782;77.384;80.573;83.073;83.512;84.801;86.373;91.681;92.689;100.000
2016-12-20;41.331;67.009;76.990;80.022;82.843;83.275;83.852;85.415;91.636;92.626;100.000
2016-12-22;41.331;67.009;76.990;80.022;82.843;83.275;83.852;85.415;91.636;92.626;100.000
2017-02-22;40.936;66.955;76.476;79.487;82.296;83.221;83.796;85.350;91.599;92.585;100.000
2017-02-24;40.931;66.944;76.462;79.473;82.280;83.205;83.780;85.334;91.586;92.572;100.000
2017-04-19;41.414;67.019;76.841;79.785;82.580;84.127;84.694;86.241;91.688;92.678;100.000
2017-06-14;41.261;67.297;76.907;79.522;82.618;84.179;84.740;86.276;91.718;92.708;100.000
2017-08-09;41.269;67.176;76.135;79.175;82.600;84.149;84.680;86.212;91.649;92.645;100.000
2017-08-13;41.284;66.938;76.158;79.197;82.619;84.166;84.697;86.227;91.658;92.652;100.000
2017-10-04;41.050;67.040;75.830;79.191;82.890;84.402;84.923;85.895;89.248;92.760;100.000
2017-10-23;41.002;66.791;75.748;79.098;82.790;84.295;84.814;85.782;89.119;90.095;100.000
2017-11-29;40.801;66.921;75.839;78.955;82.368;84.410;84.927;85.860;89.205;90.117;100.000
2018-01-23;40.337;66.425;75.090;78.113;81.423;83.412;83.912;84.817;88.075;90.434;100.000
2018-03-13;40.322;66.320;75.135;78.390;81.452;83.430;83.927;84.833;88.077;90.426;100.000
2018-05-15;40.258;66.169;75.318;78.540;82.044;83.498;83.991;84.887;88.115;90.444;100.000
2018-07-11;40.333;65.992;75.394;78.601;82.088;83.540;84.030;84.922;88.131;90.444;100.000
2018-09-04;40.228;65.886;75.384;78.584;82.094;83.538;84.025;84.915;88.094;90.407;100.000
2018-10-30;39.974;65.749;75.756;79.325;83.041;83.874;84.350;85.218;88.325;90.581;100.000
2018-12-12;39.922;65.508;75.608;78.697;82.963;83.798;84.274;85.149;88.284;90.544;100.000
2019-02-06;39.913;65.111;75.778;78.835;83.056;83.882;84.354;85.219;88.374;90.618;100.000
2019-03-27;39.671;65.506;76.031;79.088;82.496;83.788;84.259;85.122;87.640;90.604;100.000
2019-05-22;39.297;65.498;76.155;78.869;82.495;83.802;84.677;85.111;87.535;90.497;100.000
2019-06-04;39.350;65.526;76.178;78.891;82.513;83.820;84.694;85.128;87.549;90.508;100.000
2019-07-17;39.360;65.801;76.211;78.924;82.543;83.850;84.724;85.158;87.574;90.533;100.000
2019-07-19;39.365;65.798;76.209;78.921;82.541;83.848;84.722;85.156;87.572;90.532;100.000
2019-09-10;39.865;66.176;77.246;79.654;83.193;84.472;85.321;86.068;88.419;91.303;100.000
2019-11-05;39.975;66.103;77.284;79.691;83.244;84.499;85.350;86.095;88.447;91.326;100.000
2020-01-08;40.154;66.337;77.474;79.853;83.826;84.594;85.434;86.541;88.494;91.335;100.000
2020-03-04;40.005;65.900;77.118;79.482;83.862;84.700;85.533;86.638;88.578;91.400;100.000
2020-03-11;39.964;65.948;77.144;79.505;83.876;84.713;85.544;86.648;88.583;91.400;100.000
2020-04-29;40.035;66.067;76.882;80.196;83.545;84.847;85.677;86.770;88.686;91.475;100.000
2020-06-23;40.260;65.257;76.031;78.936;82.583;83.646;84.954;86.755;88.661;91.428;100.000
2020-06-30;40.324;65.324;76.316;78.932;82.584;83.646;84.954;86.756;88.661;91.428;100.000
2020-08-19;40.293;65.368;76.082;78.966;82.617;83.687;84.992;86.793;88.693;91.452;100.000
2020-10-14;40.036;65.482;75.726;78.604;83.021;83.611;84.934;86.361;88.642;91.402;100.000
2020-12-09;40.155;65.662;76.097;78.950;83.037;84.046;84.942;85.661;88.638;91.394;100.000
2021-02-03;39.821;66.074;76.705;79.533;84.114;85.645;86.474;87.703;90.651;92.511;100.000
2021-03-31;39.643;66.228;76.810;79.519;83.356;85.607;86.432;87.727;90.619;92.472;100.000
2021-04-14;39.679;66.253;76.833;79.549;83.384;85.635;86.459;87.754;90.626;92.476;100.000
2021-05-26;39.823;66.418;76.584;79.291;83.797;85.152;86.396;87.322;90.518;92.420;100.000
2021-07-21;39.702;66.711;76.936;79.956;84.180;85.281;86.792;87.718;90.580;92.489;100.000
2021-09-14;39.622;66.648;77.000;80.010;84.486;85.037;86.832;87.765;90.617;92.521;100.000
2021-09-22;39.625;66.653;77.003;80.013;84.488;85.039;86.834;87.766;90.618;92.522;100.000
2021-11-10;39.621;66.798;76.678;79.979;83.271;85.095;86.880;87.794;90.629;92.523;100.000
2022-01-05;39.681;66.957;76.460;80.049;83.320;85.138;86.929;87.837;90.661;92.542;100.000
2022-03-05;39.956;67.366;76.269;79.852;83.169;85.008;86.824;87.711;90.566;92.468;100.000
2022-04-27;40.193;67.605;76.436;79.987;83.281;85.105;86.910;87.795;90.625;92.514;100.000
2022-05-11;40.097;67.358;76.441;79.989;83.283;85.111;86.914;87.798;90.630;92.517;100.000
2022-06-27;39.918;66.980;76.411;80.057;83.318;85.159;86.670;87.831;90.641;92.532;100.000
2022-08-31;40.233;67.019;76.357;79.668;82.899;84.725;86.749;87.900;90.685;92.564;100.000
2022-10-26;40.020;67.310;76.508;80.211;83.001;84.524;86.904;87.570;90.832;92.700;100.000
2022-12-21;40.618;68.035;77.745;81.841;84.291;85.366;87.638;88.296;90.898;92.748;100.000
2023-02-15;41.406;69.315;78.774;82.013;85.000;86.255;87.973;88.611;91.142;92.937;100.000
2023-02-20;41.386;69.320;78.767;82.005;84.990;86.244;87.962;88.600;91.130;92.924;100.000
2023-03-20;41.504;69.411;78.838;82.060;85.044;86.291;88.004;88.638;91.194;92.957;100.000
2023-03-20;41.497;69.414;78.841;82.063;85.048;86.295;88.008;88.642;91.193;92.956;100.000
2023-05-17;42.731;70.403;79.517;82.419;85.624;87.032;88.365;88.981;91.449;93.149;100.000
2023-05-23;42.723;70.406;79.520;82.421;85.625;87.034;88.366;88.982;91.450;93.150;100.000
2023-05-30;42.605;70.388;79.506;82.408;85.609;87.019;88.352;88.968;91.437;93.146;100.000
2023-07-19;42.538;70.348;79.551;82.459;85.656;87.058;88.388;88.998;91.450;93.152;100.000
2023-07-26;42.538;70.348;79.551;82.459;85.656;87.059;88.389;88.999;91.451;93.152;100.000
2023-09-13;42.069;69.769;78.864;82.158;85.386;86.757;87.327;88.745;91.249;92.969;100.000
2023-10-11;41.917;69.816;78.904;81.869;85.414;86.783;87.646;88.765;91.264;92.971;100.000
2023-12-06;42.249;70.324;79.668;82.754;85.260;87.235;87.795;88.906;91.355;93.054;100.000
2024-01-31;43.024;71.476;80.380;83.433;86.071;87.859;88.408;89.455;91.852;93.514;100.000
2024-03-27;44.163;72.229;80.807;83.822;87.159;88.701;88.979;90.016;91.925;93.574;100.000
2024-03-27;44.163;72.229;80.807;83.822;87.159;88.701;88.979;90.016;91.925;93.574;100.000
2024-05-22;44.288;72.301;80.639;83.749;86.505;88.584;89.082;90.103;91.969;93.592;100.000
2024-07-24;44.614;72.494;80.822;84.049;87.078;88.755;89.027;90.252;92.083;93.675;100.000
2024-07-31;44.632;72.513;80.831;84.056;87.088;88.764;89.035;90.259;92.088;93.679;100.000
2024-09-11;45.256;72.834;81.176;84.169;86.938;88.571;89.121;90.579;92.067;93.641;100.000
2024-09-18;45.276;72.947;81.192;84.183;86.950;88.582;89.132;90.590;92.077;93.650;100.000
2024-11-06;45.924;74.583;82.976;86.288;89.211;91.619;92.410;93.872;96.048;98.078;100.000
2024-12-11;46.169;74.803;83.719;87.036;89.948;92.354;93.145;94.152;97.298;99.332;100.000
2025-02-05;46.216;74.729;83.437;87.727;90.268;92.650;93.170;94.177;96.336;99.337;100.000
2025-02-13;46.130;74.889;83.442;87.739;90.283;92.669;93.190;94.198;97.327;99.342;100.000
2025-04-02;47.421;75.609;83.312;87.558;90.130;92.597;93.288;94.312;98.353;100.000;100.000
2025-05-28;48.777;78.362;86.751;90.344;93.269;96.614;97.126;99.058;100.000;100.000;100.000
2025-06-04;48.786;78.452;87.227;90.826;94.212;97.557;98.069;100.000;100.000;100.000;100.000
2025-07-16;49.329;79.286;89.001;92.149;95.618;99.019;100.000;100.000;100.000;100.000;100.000
2025-09-10;49.794;80.674;91.435;95.793;100.000;100.000;100.000;100.000;100.000;100.000;100.000
2025-11-05;49.142;81.087;90.831;95.616;100.000;100.000;100.000;100.000;100.000;100.000;100.000
CACHE
    ;

sub show {
    my ($t, $d) = @_;
    my @share = complexity($t, "src lib");
    if($share[0]) {
        print "$d";
        for my $ss (@share) {
            printf ";%.3f", $ss;
        }
        print "\n";
    }

}

foreach my $t (sort sortthem @releases) {
    if(num($t) <= 81700) {
        next;
    }
    my $d = tag2date($t);
    show($t, $d);
}

$t=`git describe --match "curl*"`;
chomp $t;

my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) =
    localtime(time);
my $d = sprintf "%04d-%02d-%02d", $year + 1900, $mon + 1, $mday;

show($t, $d);
